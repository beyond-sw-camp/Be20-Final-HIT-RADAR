internal:
  token: DEV_INTERNAL_TOKEN_1234567890

spring:
  application:
    name: api-gateway
  cloud:
    gateway:
      server:
        webflux:
          routes:
            # =========================
            # Auth (JWT 발급 서버)
            # =========================
            - id: auth
              uri: http://localhost:8081
              predicates:
                - Path=/api/auth/**,/api/auth/password-reset/request
              filters:
                - StripPrefix=1

          # =========================
          # HR API - 인증 제외
          # =========================
            - id: hr-public
              uri: http://localhost:8082
              predicates:
                - Path=/api/v1/company-applications/submit,/api/v1/health
              filters:
                - StripPrefix=2

            - id: hr-files
              uri: http://localhost:8082
              predicates:
                - Path=/api/v1/files/**
              filters:

            # =========================
            # HR API (JWT 필요)
            # =========================
            - id: hr
              uri: http://localhost:8082
              predicates:
                - Path=/api/v1/**
              filters:
                - StripPrefix=2
                - JwtAuthenticationFilter

            # =========================
            # Notification REST API (JWT 필요)
            # =========================
            - id: notification-api
              uri: http://localhost:8083
              predicates:
                - Path=/api/notifications/**
              filters:
                - StripPrefix=1
                - JwtAuthenticationFilter

            - id: chatbot
              uri: http://localhost:8000
              predicates:
                - Path=/api/chat/**
              filters:
                - StripPrefix=1
                - JwtAuthenticationFilter

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: never

jwt:
  secret-key: Q8b83bmIq4KI2lvE+bViXYvo9SyODg1g0Q0dPyG9VNutj0GgBG8SxhWwL3oexDlWtq5uxFZs+k+NWXHYXKLjYg==

server:
  port: 8080

logging:
  level:
    org.springframework.cloud.gateway: DEBUG
    root: INFO
    org.hit.gateway: INFO

cors:
  allowed-origins: http://localhost:5173,http://127.0.0.1:5173
  allowed-methods: GET,POST,PUT,DELETE,OPTIONS,PATCH
  allowed-headers: "*"
  allow-credentials: true